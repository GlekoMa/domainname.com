---
title: ã€ŠR for Everyoneã€‹å°æ³¨ Part.1
author: ''
date: '2022-01-30'
slug: r-for-everyone
categories: []
tags: []
description: Rè¯­è¨€ï¼šå®ç”¨æ•°æ®åˆ†æå’Œå¯è§†åŒ–æŠ€æœ¯ï¼ˆåŸä¹¦ç¬¬2ç‰ˆï¼‰(https://book.douban.com/subject/34891734/)...
---
|  
[<img src="https://simpleicons.org/icons/r.svg" style="max-width:15%;min-width:40px;float:right;" alt="R repo" />](https://www.r-project.org/)

> Part.1èŒƒå›´ä¸ºç¬¬1-16ç« ï¼Œ17-26ç« ä¸ç†è®ºç»“åˆå¾ˆç´§å¯†ï¼Œç•™å¾…Part.2æ¢è®¨ï¼Œ27-30ç« åˆ™æ”¾åœ¨Part.3ã€‚ä¹¦æ˜¯1æœˆ30æ—¥å¼€å§‹è¯»çš„ï¼Œ2æœˆ5æ—¥è¿™ç¯‡å°æ³¨å®Œç»“ã€‚  

> æ­¤ä¹¦ç»“æ„å¥½ï¼Œå†…å®¹ç›¸å¯¹è¾ƒæ–°ã€‚  

> è‹±æ–‡ç‰ˆ2017å¹´å‡ºç‰ˆï¼Œä¸­æ–‡ç‰ˆ2019å¹´12æœˆå‡ºç‰ˆï¼Œè€Œå¸‚é¢ä¸Šæµè¡Œçš„ä¸­æ–‡Rä¹¦ç›®ï¼Œå¾ˆå¤šéƒ½æ˜¯å†™ä½œäº13ã€14å¹´ï¼Œè€Œå½“æ—¶çš„ç¯å¢ƒä¸17å¹´ï¼ˆè¿™ä¸€å¹´Hadley Wickamçš„ã€ŠR for Data Scienceã€‹å‡ºç‰ˆï¼Œæ„å‘³ç€Tidyverseå·²ç›¸å¯¹æˆç†Ÿï¼‰ç›¸æ¯”æœ‰æ¯”è¾ƒå¤§çš„å·®åˆ«ã€‚  

> æ¨èï¼šGarrett Grolemund.[Hands-On Programming with R](https://rstudio-education.github.io/hopr/)  å…¶[ä¸­æ–‡ç‰ˆ](https://book.douban.com/subject/26808217/)æ˜¯æˆ‘çš„å¯è’™ä¹¦ç±ï¼Œè®²è§£ç”±ä¸‰ä¸ªé¡¹ç›®é©±åŠ¨ï¼Œåœ¨æ²¡æœ‰ä»»ä½•åŸºç¡€çš„æƒ…å†µä¸‹ï¼Œä¸‰å¤©å°±å¯çœ‹å®Œã€‚ï¼ˆè¿™æœ¬ä¹¦å‡ ä¹æ²¡æœ‰ä½¿ç”¨ä»»ä½•RåŒ…ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œå…¶ç¼ºç‚¹ä¹Ÿè®¸åªæœ‰å†…å®¹ç›¸å¯¹è¾ƒå°‘ã€‚è€ŒHadley Wickamçš„ã€ŠR for Data Scienceã€‹æ˜¯å…¶å§Šå¦¹ç¯‡ã€‚ï¼‰

ç¬”è®°æ˜¯ä¸€ç§å¾ˆç§äººçš„ä¸œè¥¿ï¼Œç½‘ç»œä¸Šè®¸å¤šåšå®¢çš„å­¦ä¹ ç¬”è®°é€šå¸¸è¿‡äºå†—é•¿ï¼Œä¸”å†…å®¹å¸¸ä»…æ˜¯å¯¹åŸä¹¦çš„ä¸€äº›æç‚¼ï¼Œè¿™ç±»æ€»ç»“æ€§çš„ç¬”è®°é€‚ç”¨äºè‡ªå·±å¤ä¹ ï¼Œè€Œå°±æ•ˆç‡æ¥è¯´ï¼Œæœªå¿…é€‚åˆä»–è€…ã€‚æ‰€ä»¥è¿™ç¯‡æ–‡ç« é‡ŒåªåŒ…å«è®¸å¤šæ³¨é‡Šæ€§è´¨çš„ä¸œè¥¿ï¼Œæ•…åªç§°ä½œâ€œå°æ³¨â€ã€‚

â€œå°æ³¨â€åˆ†ä¸º*ä¸€èˆ¬æ³¨é‡Š*å’Œç‰¹é’ˆå¯¹æ­¤ä¹¦çš„*ç‰¹æ®Šæ³¨é‡Š*ã€‚

## ä¸€èˆ¬æ³¨é‡Š
### P17 â€œ2.2 RStudioâ€  
åœ¨å¯åŠ¨æˆ–é€€å‡ºæ—¶ï¼Œå»ºè®®ä¸è¦æ¢å¤æˆ–ä¿å­˜.RDataæ–‡ä»¶ã€‚   
è¿™ç‚¹å…¶ä»–Rä¹¦ç±å¯èƒ½æ²¡æœ‰é¡¾åŠåˆ°ï¼Œä½†è®¾ç½®æˆâ€œNeverâ€ç¡®å®èƒ½æ–¹ä¾¿è®¸å¤šã€‚

### P61 â€œ6.2 è¯»å–Excelæ•°æ®â€  
ä¹¦ä¸­åªæåˆ°è¯»å–Excelæ–‡ä»¶å¯ä»¥ä½¿ç”¨readxlåŒ…ï¼›å¦‚æœæƒ³å†™å…¥Excelæ–‡ä»¶çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨openxlsxåŒ…ã€‚

## ç‰¹æ®Šæ³¨é‡Š
### P14 â€œ2.2 RStudioâ€  

æœ¬èŠ‚ä¸­è®²äº†ä¸€äº›RStudioé‡Œçš„å¿«æ·é”®ï¼Œè¡¥å……å¦‚ä¸‹ï¼ˆWindowsï¼‰ï¼š  

- Alt + - ï¼šå¿«é€Ÿè¾“å…¥â€œ <- â€
- Ctrl + Shift + M ï¼šå¿«é€Ÿè¾“å…¥â€œ %>% â€ï¼ˆæˆ–â€œ |> â€ï¼Œå¯ä»¥åœ¨RStudioä¸­è®¾ç½®ï¼‰
- Ctrl + Alt + R ï¼šè¿è¡Œå½“å‰è„šæœ¬æ‰€æœ‰å†…å®¹
- Shift + Enter ï¼šåœ¨æ§åˆ¶å°ä¸­æ¢è¡Œ
- Ctrl + Shift +N ï¼šæ–°å»ºè„šæœ¬
- Ctrl + S ï¼šä¿å­˜è„šæœ¬
- Ctrl + W ï¼šå…³é—­å½“å‰è„šæœ¬
- Ctrl + Shift + W ï¼šå…³é—­æ‰€æœ‰è„šæœ¬

### P40 â€œ4.8 ç®¡é“â€  

æœ¬èŠ‚ä¸­æœ‰ä»£ç å¦‚ä¸‹ï¼š  
```{r}
library(magrittr)
x <- 1:10
mean(x)
```

```{r}
x %>% mean
```
è¿™é‡Œçš„x %>% meanä¹Ÿå¯ä»¥å†™æˆx %>% mean()ã€‚äº‹å®ä¸Šï¼ŒR 4.1ç‰ˆæœ¬åï¼ŒåŸç”Ÿæ”¯æŒç®¡é“ï¼Œä½†ç®¡é“ç¬¦å†™æ³•ä¸magrittråŒ…ä¸åŒï¼Œå†™ä½œ |> ï¼Œå®ç°åŸç†å’Œç”¨æ³•ä¹Ÿç•¥æœ‰ä¸åŒï¼Œæ¯”å¦‚ï¼Œä½¿ç”¨ |> å¿…é¡»å†™æˆx |> mean()è€Œä¸èƒ½å†™æˆx |> meanï¼Œç»Ÿè®¡ä¹‹éƒ½æœ‰ä¸æ­¤ç›¸å…³çš„[è®¨è®ºè´´](https://d.cosx.org/d/422269-r-410)

### P46 â€œ5.1 æ•°æ®æ¡†â€  

æœ¬èŠ‚ä¸­æœ‰ä»£ç å¦‚ä¸‹ï¼š  
```
x <- 10:1
y <- -4:5
q <- c("Hockey","Football","Baseball","Curling","Rugby",
       "Lacrosse","Basketball","Tennis","Cricket","Soccer")
theDF <- data.frame(First=x,Second=y,Sport=q)
#çœç•¥Â·Â·Â·
class(theDF[,"Sport"])
```
ä¹¦ä¸­ç»™å‡ºçš„ç»“æœä¸º  
```
[1] "factor"
```
ä½†å®é™…è¿è¡Œç»“æœåº”ä¸º
```
[1] "character"
```
è¿™æ˜¯å› ä¸ºä¹¦ä¸­ä½¿ç”¨çš„Rç‰ˆæœ¬ä¸º3.4.0ï¼Œè€ŒRè‡ª[4.0.0ç‰ˆæœ¬](https://stat.ethz.ch/pipermail/r-announce/2020/000653.html)ä»¥åï¼Œæ›´æ–°ä¸ºé»˜è®¤ä½¿ç”¨stringAsFactors = FALSEï¼Œå³ä¸å†é»˜è®¤å°†æ•°æ®æ¡†ï¼ˆdata.frameï¼‰ä¸­çš„åˆ—å‘é‡è½¬æ¢ä¸ºfactorï¼ˆå› å­ï¼‰å‘é‡ï¼Œæ‰€ä»¥å®é™…è¿è¡Œç»“æœä¼šä¸ä¹¦ä¸­æœ‰æ‰€å·®å¼‚ã€‚  
R 4.0.0äº2020å¹´4æœˆ24æ—¥å‘å¸ƒï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰æ—©äºè¿™ä¸ªæ—¶é—´å‡ºç‰ˆçš„ä¹¦ç›®éƒ½ä¼šå­˜åœ¨ç›¸å…³é—®é¢˜ã€‚å› æ­¤é˜…è¯»ä¸€äº›ç›¸å…³èµ„æ–™æ—¶åº”å½“æ—¶åˆ»æ³¨æ„åˆ°è¿™ä¸ªå·®å¼‚ã€‚

###  P53 â€œ5.2 åˆ—è¡¨â€

æœ¬èŠ‚æœ‰å¦‚ä¸‹å™è¿°ï¼š 

_â€œå¶å°”å¯¹åˆ—è¡¨æˆ–å‘é‡æˆ–æ•°æ®æ¡†å¢åŠ å…ƒç´ éƒ½è¿˜å¥½ï¼Œä½†æ˜¯ï¼Œå¦‚æœåå¤è¿™æ ·åšè®¡ç®—ä»£ä»·å°±å¤ªé«˜äº†ã€‚æ‰€ä»¥æœ€å¥½åˆ›å»ºæŒ‡å®šé•¿åº¦çš„åˆ—è¡¨ï¼Œç„¶åé€šè¿‡åˆé€‚çš„ç´¢å¼•å¢åŠ å…ƒç´ ã€‚â€_

å¦‚æœæ²¡çœ‹æ‡‚è¿™æ®µæè¿°çš„è¯ï¼Œå­¦å®Œå¾ªç¯ç›¸å…³ç« èŠ‚åï¼Œé˜…è¯»ä¸‹é¢ä¸¤æ®µä»£ç ï¼š  

äº‹å…ˆæŒ‡å®šäº†å˜é‡outputçš„é•¿åº¦ï¼š
```{r}
#system.timeå‡½æ•°å¯ä»¥è®¡ç®—ä¸€æ®µä»£ç çš„è¿è¡Œæ—¶é—´
system.time({
 output <- rep(NA, 10000000)
 for (i in 1:10000000) {
 output[i] <- i + 1
 }
})
```
æœªäº‹å…ˆæŒ‡å®šoutputçš„é•¿åº¦ï¼š
```{r}
system.time({
 output <- NA
 for (i in 1:10000000) {
 output[i] <- i + 1
 }
})
```
å¯ä»¥çœ‹å‡ºå‰è€…çš„è¿è¡Œé€Ÿåº¦å¤§çº¦æ˜¯åè€…çš„3.6å€ã€‚åŸå› æ˜¯åœ¨åè€…ä¸­ï¼ŒRä¸å¾—ä¸æ¯æ¬¡å¾ªç¯éƒ½æ‰©å……ä¸€æ¬¡outputå˜é‡çš„é•¿åº¦ã€‚å³æ¯æ¬¡å¾ªç¯ï¼ŒRéƒ½éœ€è¦åœ¨è®¡ç®—æœºå†…å­˜ä¸­å¤åˆ¶åŸé•¿åº¦çš„outputå˜é‡ï¼ŒåŒæ—¶è…¾å‡ºä¸€å—å®¹é‡æ›´å¤§çš„åŒºåŸŸï¼Œç”¨æ¥å­˜å‚¨æ–°é•¿åº¦çš„outputå˜é‡ï¼Œæœ€åæŠŠåŸä½ç½®çš„outputå˜é‡æ¸…é™¤ã€‚åœ¨åä¸€æ®µä»£ç ä¸­ï¼Œè¿™ä¸€ç³»åˆ—åˆ›å»ºã€å¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤çš„ç¹çæ“ä½œå…±è¿›è¡Œäº†10000000æ¬¡ï¼è€Œå‰è€…çš„å†™æ³•å°±å¾ˆå¥½åœ°é¿å…äº†è¿™ä¸ªé—®é¢˜ï¼

### P61 â€œ6.2 è¯»å–Excelæ•°æ®â€  

æœ¬èŠ‚ä¸­æœ‰ä»£ç å¦‚ä¸‹ï¼š  
```
download.file(url='http://www.jaredlander.com/data/ExcelExample.xlsx',
              destfile='data/ExcelExample.xlsx',method='curl')
```
è¿è¡Œåº”è¯¥ä¼šæŠ¥é”™ï¼š
```
Error in download.file(url = "http://www.jaredlander.com/data/ExcelExample.xlsx",  : 
  'curl' call had nonzero exit status
```
æŠ¥é”™åŸå› åœ¨äºä¿å­˜è·¯å¾„ä¸å¯¹ï¼Œå› ä¸ºæœ¬åœ°çš„Rå·¥ä½œç›®å½•å¯èƒ½ä¸ä½œè€…çš„ä¸åŒï¼Œå·¥ä½œç›®å½•å¯ä»¥ç”¨getwd()æŸ¥çœ‹ï¼Œå¾ˆå¯èƒ½æœ¬åœ°å·¥ä½œç›®å½•ä¸‹é¢æ²¡æœ‰åˆ›å»ºdataæ–‡ä»¶å¤¹ï¼Œäºæ˜¯æŠ¥é”™ã€‚æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªdataæ–‡ä»¶å¤¹å³å¯ã€‚

ä½†äº‹æƒ…æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œå³ä½¿ä¸å†æŠ¥é”™ï¼Œä»ç½‘é¡µå†™åˆ°æœ¬åœ°çš„ä¹Ÿå¯èƒ½ï¼ˆæˆ–è€…è¯´ä¸€å®šï¼‰åªæ˜¯ä¸€ä¸ª1KBçš„xlsxæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•ä½¿ç”¨ï¼Œå³è¿™æ¬¡å†™å…¥å…¶å®æ˜¯å¤±è´¥äº†ã€‚å…·ä½“åŸå› æˆ‘ä¸æ¸…æ¥šï¼Œç»æŸ¥æ‰¾[èµ„æ–™](https://stackoverflow.com/questions/59697422/why-method-curl-is-not-working-in-download-file-in-r/59697717#59697717?newreg=636c77acc9b043e5a2b0f3fe04ae9b17),å¯ä»¥æ”¹ä¸ºè¿™æ ·å†™ï¼ˆå³å¯æˆåŠŸï¼‰ï¼š
```
download.file(url='http://www.jaredlander.com/data/ExcelExample.xlsx',
              destfile='data/ExcelExample.xlsx',mode='wb')
```

### P68 â€œ6.7 è¯»å–ç½‘é¡µæ•°æ®*â€
æœ¬èŠ‚æœ‰ä»£ç å¦‚ä¸‹ï¼š
```
library(XML)
theURL <- "http://www.jaredlander.com/2012/02/another-kind-of-super-bowl-pool/"
bowlPool <- readHTMLTable(theURL,which=1,header=FALSE,stringsAsFactors=FALSE)
```
è¿è¡Œåº”è¯¥ä¼šæŠ¥é”™ï¼š
```
Error: failed to load external entity "http://www.jaredlander.com/2012/02/another-kind-of-super-bowl-pool/"
```
åŸå› æˆ‘å°šæœªæ¢ç©¶ï¼Œwebæ–¹é¢çš„æˆ‘æ¯”è¾ƒæ¬ ç¼ºï¼Œæš‚åªç•™å¾…ä»¥åè§£å†³ã€‚  
ä¸è¿‡è‹¥æ¢ç”¨è¯¾æœ¬ç´§æ¥æåˆ°çš„rveståŒ…ï¼Œåˆ™å°±å¯ä»¥æˆåŠŸæå–ï¼š
```
library(rvest)
theURL <- "http://www.jaredlander.com/2012/02/another-kind-of-super-bowl-pool/"
bowlPool <- read_html(theURL) %>% 
                 html_element("table") %>% 
                 html_table()
#read_html() çˆ¬å–é¡µé¢æºä»£ç 
#html_element() æå–ç½‘é¡µä¸­æŒ‡å®šå…ƒç´ çš„éƒ¨åˆ†
#html_table() æ ¹æ®æå–çš„å…ƒç´ ç”Ÿæˆæ•°æ®æ¡†æˆ–åˆ—è¡¨
```
è¯¾æœ¬åé¢æå–ç‰¹å®šå…ƒç´ ä½¿ç”¨çš„å‡½æ•°æ˜¯html_nodesï¼ˆç°åœ¨è¿˜å¯ä»¥ä½¿ç”¨ï¼‰ï¼Œå®˜ç½‘ç°åœ¨å·²ç»æ²¡æœ‰
è¿™ä¸ªå‡½æ•°çš„ä»‹ç»äº†ï¼Œå…¶æ–°çš„æ›¿ä»£å‡½æ•°æ˜¯html_elementsã€‚html_elementå’Œhtml_elementsæœ‰æ‰€
ä¸åŒï¼ŒåŠ â€œsâ€æœ€ç»ˆè¿”å›çš„ä¼šæ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚  
_Tipï¼šXMLåŒ…å¾ˆç»å…¸ï¼ŒHadley Wickhamå‚è€ƒå®ƒå¼€å‘äº†xml2åŒ…ï¼ˆ2015å¹´çš„blogï¼‰ï¼Œä¸¤ä¸ªåŒ…å­°ä¼˜å­°åŠ£ï¼Œå› ä¸ºæˆ‘å°šæœªæ¢ç©¶ï¼Œæ‰€ä»¥ä¸å¾—è€ŒçŸ¥ã€‚_

### P82 â€œ7.2 ggplot2â€
æœ¬èŠ‚æœ‰ä»£ç å¦‚ä¸‹ï¼š
```
econ2000 <- economics[which(economics$year >= 2000),]
```
å»æ‰whichä¹Ÿå¯ä»¥ï¼š
```{r message=FALSE, warning=FALSE}
library(ggplot2)
library(lubridate)
economics$year <- year(economics$date)
econ2000 <- economics[which(economics$year >= 2000),]
re_econ2000 <- economics[economics$year >= 2000,]
all(econ2000 == re_econ2000)
```
ï¼ˆæˆ–è€…è¯´ä½¿ç”¨whichå¯ä»¥æé«˜è¿è¡Œæ•ˆç‡ï¼Ÿæš‚æŒ‰ã€‚ï¼‰

### P109 â€œ11.3 plyråŒ…â€
æœ¬èŠ‚æœ‰ä»£ç å¦‚ä¸‹ï¼š  
<1>
```{r message=FALSE, warning=FALSE}
library(plyr)
system.time(
    replicate(1000,dlply(baseball,"id",nrow))
)
#æˆ‘æ“…è‡ªå¢åŠ äº†replicateå‡½æ•°
#å› ä¸ºåªè¿è¡Œä¸€æ¬¡çš„è¯å‡ ä¹è¿è¡Œæ—¶é•¿å¾ˆçŸ­ï¼Œå‡ ä¹çœ‹ä¸å‡ºå·®åˆ«
```
<2>
```{r message=FALSE, warning=FALSE}
library(plyr)
iBaseball <- idata.frame(baseball)
system.time(replicate(100,dlply(iBaseball,"id",nrow)))
```
è¯¾æœ¬ä¸­ä¸¤è€…çš„è¿è¡Œæ—¶é—´åˆ†åˆ«ä¸º0.31å’Œ0.19ï¼Œè€Œè¿™é‡Œçš„è¿è¡Œç»“æœæ˜¯88.89å’Œ94.59ï¼Œä¸ºä½•ä¸¤ä¸ªç»“æœä¸ä¸€è‡´ï¼Œä¸æ¸…æ¥šã€‚ä¸è¿‡ä¹Ÿè®¸ä¸é‡è¦ï¼Œä½œè€…åé¢ä¹Ÿæåˆ°å°†æ•°æ®é›†è½¬æ¢ä¸ºidata.frameæ ¼å¼èƒ½ä¸èƒ½æé«˜æ•ˆç‡è¿˜å¾—æŒ‘æ•°æ®é›†ã€‚ğŸ˜µ     

<3>   
ç°åœ¨æµ‹è¯•ä½¿ç”¨data.tableçš„æ•ˆç‡ï¼š
```{r message=FALSE, warning=FALSE}
library(data.table)
data(baseball,package = "plyr")
bBaseball = data.table(baseball)
system.time(
  replicate(1000,
            bBaseball[,list(nrow=length(year)),by=id]
            )
)
#è¿™é‡Œä½¿ç”¨çš„æ˜¯lengthï¼ŒåŸå› æ˜¯nrowåœ¨è¿™å„¿ç”¨ä¸äº†ã€‚
#äº‹å®ä¸Šå¦‚æœæŠŠä¸Šé¢çš„ä¸¤æ®µä»£ç æ¢æˆlengthï¼Œè¿è¡Œæ—¶é—´å‡ ä¹ä¸ä½¿ç”¨nrowç›¸åŒã€‚
```
ä»…ç”¨æ—¶ä¸¤ç§’ï¼ğŸ˜®   

<4>    
å†æµ‹è¯•ä½¿ç”¨dplyråŒ…çš„æ•ˆç‡ï¼š
```{r message=FALSE, warning=FALSE}
library(dplyr)
data(baseball,package = "plyr")
dBaseball = tibble(baseball)
system.time(
  replicate(1000,
            dBaseball %>% 
              group_by(id) %>% 
              summarize(nrow=nrow(year))
            )
)
```
ç”¨æ—¶åç§’ã€‚

### P139 â€œ12.11 dplyrä½¿ç”¨æ•°æ®åº“â€
æœ¬èŠ‚æœ‰ä»£ç å¦‚ä¸‹ï¼š
```
download.file("http://www.jaredlander.com/data/diamonds.db",
              destfile="data/diamonds.db",mode = "wb")
diaDBSource <- src_sqlite("data/diamonds.db")
```
æç¤ºé”™è¯¯ï¼šæ‰¾ä¸åˆ°src_sqliteå‡½æ•°ã€‚åŸå› æ˜¯ä½œè€…å†™ä½œæ—¶dplyråŒ…çš„ç‰ˆæœ¬ä¸º0.6ï¼Œç°åœ¨åˆ™ä¸º1.0.7ã€‚è€Œ1.0.0ç‰ˆæœ¬çš„ç›¸å…³æ›´æ–°è¯´æ˜å¦‚ä¸‹ï¼š 

> src_mysql(), src_postgres(), and src_sqlite() has been deprecated. Weâ€™ve recommended against them for some time. Instead please use the approach described at https://dbplyr.tidyverse.org/.

å³ç°åœ¨å»ºè®®ä½¿ç”¨dbplyrï¼ˆdplyrçš„æ”¯æ´åŒ…ï¼‰æ¥æ“çºµæ•°æ®åº“ã€‚dbplyrå®˜ç½‘ä¸­çš„å†™æ³•å·²ç»ä¸å†ä½¿ç”¨src_sqliteå‡½æ•°ï¼Œè€Œæ˜¯æ”¹ç”¨ä¹¦ä¸­æåˆ°çš„å¦ä¸€ç§åº”ç”¨é¢æ›´å¹¿çš„æ–¹æ³•ï¼šä½¿ç”¨DBI::dbConnect()å‡½æ•°ã€‚

### P172 â€œ16.3 æå–æ–‡æœ¬â€
æœ¬èŠ‚æœ‰ä»£ç å¦‚ä¸‹ï¼š
```
library(XML)
load("dadta/presidents.rdata")
theURL <- "http://www.loc.gov//rr/print/list/057_chron.html"
presidents <- readHTMLTable(theURL,which=3,as.data.frame=TRUE,
                           skip.rows=1,header=TRUE,stringsAsFactors=FALSE)
```
è¿è¡Œåº”è¯¥ä¼šæŠ¥é”™ï¼š
```
Error: failed to load HTTP resource
```
è¿›å…¥è¿™ä¸ªç½‘å€ï¼Œä¼šå‘ç°å…¶è®¾ç½®äº†éªŒè¯ç¨‹åºä»¥é˜²æ­¢çˆ¬å–æ•°æ®ã€‚  

è§£å†³åŠæ³•ï¼šäººå·¥å¤åˆ¶è¿™ä¸ªç½‘é¡µçš„htmlæºä»£ç ï¼Œä¿å­˜ä¸ºæœ¬åœ°htmlæ–‡ä»¶ï¼Œç„¶åä»æœ¬åœ°çˆ¬å–ã€‚  

ç¬¬äºŒç§çˆ¬å–åŠæ³•ï¼šä¿å­˜åˆ°æœ¬åœ°åï¼Œä½¿ç”¨ä¹‹å‰ä¹¦ä¸Šä»‹ç»è¿‡çš„rveståŒ…ã€‚å¯ä»¥ç›´æ¥çˆ¬å–å‡ºæ­£ç¡®çš„è¡¨ï¼š
```
library(rvest)
#å‡è®¾æ–‡ä»¶è¢«ä¿å­˜ä¸ºbb.html
theURL <- "bb.html"
presidents2 <- (read_html(theURL) %>% 
    html_elements("table") %>% 
    html_table())[[4]]
```

## One more thing
_æ³¨ï¼šã€ŠR for Everyoneã€‹ä¸­æ²¡æœ‰ç»™å‡ºç»ƒä¹ é¢˜ç›®ï¼Œæ•…åº”è‡ªè¡Œå¯»æ‰¾å·©å›ºçŸ¥è¯†çš„åŠæ³•ã€‚_

> å­æ›°ï¼šâ€œå­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ã€‚â€    â€”â€”ã€Šè®ºè¯­Â·ä¸ºæ”¿ã€‹